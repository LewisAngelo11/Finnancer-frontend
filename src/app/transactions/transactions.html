<main class="w-screen h-screen text-white p-4">
    <button
        (click)="goToDashboard()"
        class="bg-green-primary flex items-center justify-center rounded-full w-10 h-auto p-2 mb-4 ml-2"
    >
        <i class='bx  bx-chevron-left text-2xl text-black'  ></i> 
    </button>

    <!-- GRID PRINCIPAL -->
    <div class="grid grid-cols-1 lg:grid-cols-3 h-auto gap-4">
        <!-- Componente del Balance Total -->
        <div class="slide-to-right col-span-1 md:col-span-2 bg-gradient-gray-h rounded-2xl p-6 shadow-lg">
    
            <h2 class="text-xl font-semibold mb-4">Balance Total</h2>
            <!-- L√≠nea divisora -->
            <span class="block bg-gray-details w-full h-0.5"></span>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 my-4">
                <div>
                    <p class="text-lg text-white mb-1 font-light">Transacciones de Ingresos</p>
                    <div class="flex flex-row gap-2 items-center">
                        <p class="text-3xl lg:text-5xl font-medium">$10,200.00 </p>
                        <p class="bg-categories text-xs p-1 lg:px-2 rounded-full">MXN</p>
                    </div>
                </div>

                <div>
                    <p class="text-lg text-white mb-1 font-light">Transacciones de Egresos</p>
                    <div class="flex flex-row gap-2 items-center">
                        <p class="text-3xl lg:text-5xl font-medium">$3,600.00 </p>
                        <p class="bg-categories text-xs p-1 lg:px-2 rounded-full">MXN</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Componente del Conteo R√°pido -->
        <div class="slide-to-left w-full bg-gradient-gray-h-2 rounded-2xl p-6 shadow-lg">
            <h2 class="text-xl font-semibold mb-4">Conteo R√°pido</h2>
            <!-- L√≠nea divisora -->
            <span class="block bg-gray-details w-full h-0.5 my-3"></span>

            <div class="flex flex-col lg:flex-row items-center justify-between mb-4 gap-4">
                <div class="w-full">
                    <div class="flex flex-row items-center justify-between w-full">
                        <p class="text-sm text-white font-thin">Transacciones de Ingresos</p>
                        <p class="font-semibold text-md">10</p>
                    </div>
                    <span class="bg-green-primary w-full h-1 rounded-full block my-1"></span>
                </div>

                <div class="w-full">
                    <div class="flex flex-row items-center justify-between w-full">
                        <p class="text-sm text-zinc-300">Transacciones de Egresos</p>
                        <p class="font-semibold text-lg">8</p>
                    </div>
                    <span class="bg-green-primary w-full h-1 rounded-full block my-1"></span>
                </div>
            </div>

            <div class="flex gap-4">
                <button
                    (click)="openModal()"
                    class=" card flex-1 text-black bg-green-primary rounded-xl py-2 font-light">
                    Nueva Transacci√≥n
                </button>
                <button class="card flex-1 border border-green-500 rounded-xl py-2 font-light">
                    Editar Transacci√≥n
                </button>
            </div>
        </div>
    </div>

    <!-- TRANSACCIONES PENDIENTES -->
    <div class="slide-to-left mt-4 bg-gradient-gray-h p-6 rounded-2xl">
        <h3 class="text-xl mb-3 font-semibold">√öltimas Transacciones</h3>
        <!-- L√≠nea divisora -->
        <span class="block bg-gray-details w-full h-0.5 my-3"></span>

        <div class="flex gap-4 overflow-x-auto overscroll-none py-2">

            <!-- TARJETA PENDIENTE -->
            <div class="bg-zinc-900 min-w-[280px] rounded-2xl p-4 shadow-lg">
                <div class="flex items-center gap-2 mb-2">
                    <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-xl">
                        üíµ
                    </div>
                    <div>
                        <p class="font-semibold">Ingresos de Ventas</p>
                        <p class="text-green-400 text-sm">Ingreso</p>
                    </div>
                </div>
                <p class="text-2xl font-bold">$2,200.00 <span class="text-sm">MXN</span></p>
            </div>

            <!-- OTRA TARJETA -->
            <div class="bg-zinc-900 min-w-[280px] rounded-2xl p-4 shadow-lg">
                <div class="flex items-center gap-2 mb-2">
                    <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-xl">
                        ‚ö°
                    </div>
                    <div>
                        <p class="font-semibold">Servicios B√°sicos</p>
                        <p class="text-red-400 text-sm">Egreso</p>
                    </div>
                </div>
                <p class="text-2xl font-bold">$1,400.00 <span class="text-sm">MXN</span></p>
            </div>
        </div>
    </div>

    <!-- TRANSACCIONES TOTALES -->
    <div class="mt-5 slide-in-up">
        <h2 class="text-2xl font-bold">Transacciones Totales</h2>

        <p class="text-green-400 text-lg font-semibold mt-1">Filtros</p>

        <div class="flex mt-3 overflow-x-auto w-full overscroll-none">
            <button
                (click)="selectorFilter('todas')"
                [class.filter-activate]="selectFilter() === 'todas'"
                [class.filter-inactivate]="selectFilter() !== 'todas'"
                class="filter-inactivate px-4 py-2 rounded-t-xl font-thin"
            >
                Todas
            </button>
            <button
                (click)="selectorFilter('ingresos')"
                [class.filter-activate]="selectFilter() === 'ingresos'"
                [class.filter-inactivate]="selectFilter() !== 'ingresos'"
                class="filter-inactivate px-4 py-2 rounded-t-xl font-thin"
            >
                Ingresos
            </button>
            <button
                (click)="selectorFilter('egresos')"
                [class.filter-activate]="selectFilter() === 'egresos'"
                [class.filter-inactivate]="selectFilter() !== 'egresos'"
                class="filter-inactivate px-4 py-2 rounded-t-xl font-thin"
            >
                Egresos
            </button>
            <button
                (click)="selectorFilter('pagadas')"
                [class.filter-activate]="selectFilter() === 'pagadas'"
                [class.filter-inactivate]="selectFilter() !== 'pagadas'"
                class="filter-inactivate px-4 py-2 rounded-t-xl font-thin"
            >
                Completadas
            </button>
            <button
                (click)="selectorFilter('pendientes')"
                [class.filter-activate]="selectFilter() === 'pendientes'"
                [class.filter-inactivate]="selectFilter() !== 'pendientes'"
                class="filter-inactivate px-4 py-2 rounded-t-xl font-thin"
            >
                Pendientes
            </button>
            <button
                (click)="selectorFilter('canceladas')"
                [class.filter-activate]="selectFilter() === 'canceladas'"
                [class.filter-inactivate]="selectFilter() !== 'canceladas'"
                class="filter-inactivate px-4 py-2 rounded-t-xl font-thin"
            >
                Canceladas
            </button>
        </div>

        <!-- Tabla de transacciones -->
        <div class="bg-zinc-800 md:rounded-tr-2xl overscroll-none overflow-auto">
            <table class="w-full text-center">
                <thead class="text-white">
                    <tr class="bg-zinc-900">
                        <th class="font-thin p-4">ID</th>
                        <th class="font-thin p-4">Categor√≠a</th>
                        <th class="font-thin p-4">Subcategor√≠a</th>
                        <th class="font-thin p-4">Perfil Responsable</th>
                        <th class="font-thin p-4">Monto</th>
                        <th class="font-thin p-4">Fecha de transacci√≥n</th>
                        <th class="font-thin p-4">Estatus</th>
                    </tr>
                </thead>

                <tbody>
                    @for (transaccion of transacciones; track transaccion.id) {
                        <tr>
                            <td class="font-thin p-4">{{transaccion.id}}</td>
                            <td class="font-thin p-4">{{transaccion.categoria}}</td>
                            <td class="font-thin p-4">{{transaccion.subcategoria}}</td>
                            <td class="font-thin p-4">{{transaccion.perfilResponsable}}</td>
                            <td class="font-thin p-4">{{transaccion.monto}}</td>
                            <td class="font-thin p-4">{{transaccion.fechaTransaccion}}</td>
                            <td class="font-thin p-4">{{transaccion.estatus}}</td>
                        </tr>
                    }
                    @empty {
                        <tr>
                            <td colspan="7" class="font-thin p-4 text-center">
                                No hay transacciones en el mes actual.
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    @if (modalOpen()) {
        <div class="modal">
            <div
                class="modal-container"
                [class.animate]="animateModal()"
                >
                <form
                    [formGroup]="formNewTransaction"
                    (ngSubmit)="addNewTransaction()"
                    class="w-full h-full flex flex-col gap-2 items-center justify-center"
                >
                    <div class="w-full flex flex-row items-center justify-between text-black">
                        <h2 class="text-2xl font-semibold">Nueva Transacci√≥n</h2>
                        <button (click)="closeModal()" type="button" class="text-3xl">
                            <i class='bx  bx-x'  ></i> 
                        </button>
                    </div>
                    <!-- L√≠nea divisora -->
                    <span class="bg-gray-200 w-full h-0.5"></span>

                    <section class="w-full flex flex-col items-start justify-start gap-3 text-black">
                        <!-- Contenedor de las categorias -->
                        <div class="w-full flex flex-col gap-2 items-start justify-start">
                            <label for="categoria">Categor√≠a</label>
                            <select
                                formControlName="categoria" 
                                class="card w-full p-3 border-1 border-gray-400 rounded-xl md:rounded-2xl text-gray-500">
                                @for (categoria of categorias; track categoria.id) {
                                    <option value="">{{categoria.nombre}}</option>
                                }
                                @empty {
                                    <option value="">No hay categor√≠as</option>
                                }
                            </select>
                        </div>
                        <!-- Contenedor de las subcategorias -->
                        <div class="w-full flex flex-col gap-2 items-start justify-start">
                            <label for="subcategoria">Subcategor√≠a</label>
                            <select
                                formControlName="subcategoria" 
                                class="card w-full p-3 border-1 border-gray-400 rounded-xl md:rounded-2xl text-gray-500">
                                @for (subcategoria of subcategorias; track subcategoria.id) {
                                    <option value="">{{subcategoria.nombre}}</option>
                                }
                                @empty {
                                    <option value="">No hay subcategor√≠as</option>
                                }
                            </select>
                        </div>
                        <!-- Contenedor de la nota de la transacci√≥n -->
                        <div class="w-full flex flex-col gap-2 items-start justify-start">
                            <label for="nota">Nota (Opcional)</label>
                            <textarea
                                formControlName="nota"
                                placeholder="Ingrese la nota de la transaccion"
                                class="card w-full p-3 border-1 border-gray-400 rounded-xl md:rounded-2xl text-gray-500"
                            ></textarea>
                        </div>
                        <!-- Contenedor de el monto total y los plazos -->
                        <div class="w-full flex flex-row gap-2 items-center justify-between">
                            <!-- Monto total -->
                            <div class="w-3/5 flex flex-col gap-2 items-start justify-start">
                                <label for="montoTotal">Monto Total</label>
                                <input
                                    type="number"
                                    formControlName="montoTotal"
                                    placeholder="$0.00"
                                    class="card w-full p-3 border-1 border-gray-400 rounded-xl md:rounded-2xl text-gray-500"
                                >
                            </div>
                            <!-- Plazos -->
                            <div class="w-2/5 flex flex-col gap-2 items-start justify-start">
                                <label for="plazos">N√∫mero de plazos</label>
                                <input
                                    type="number"
                                    formControlName="plazos"
                                    class="card w-full p-3 border-1 border-gray-400 rounded-xl md:rounded-2xl text-gray-500"
                                >
                            </div>
                        </div>
                        <!-- Contenedor de la fecha de la transacci√≥n -->
                        <div class="w-3/5 flex flex-col gap-2 items-start justify-start">
                            <label for="fechaTransaccion">Fecha de Transacci√≥n</label>
                            <input 
                                type="date"
                                formControlName="fechaTransaccion"
                                class="card w-full p-3 border-1 border-gray-400 rounded-xl md:rounded-2xl text-gray-500"
                            >
                        </div>
                        <!-- Contenedor de las personas (Clientes o Proveedores) -->
                        <div class="w-full flex flex-col gap-2 items-start justify-start">
                            <label for="persona">Cliente o Proveedor</label>
                            <select
                                formControlName="persona" 
                                class="card w-full p-3 border-1 border-gray-400 rounded-xl md:rounded-2xl text-gray-500">
                                @for (persona of personas; track persona.id) {
                                    <option value="">{{persona.nombre}}</option>
                                }
                                @empty {
                                    <option value="">No hay categor√≠as</option>
                                }
                            </select>
                        </div>
                        <!-- L√≠nea divisora -->
                        <span class="bg-gray-200 w-full h-0.5"></span>
                        <button
                            type="submit"
                            class="card bg-green-primary p-4 rounded-2xl w-full font-medium"
                        >
                            Crear Transacci√≥n
                        </button>
                    </section>
                </form>
            </div>
        </div>
    }
</main>